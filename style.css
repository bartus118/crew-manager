/* style.css — Crew Manager
   Zawiera:
   - podstawowy layout i tabela
   - style statusów i ramki wierszy
   - modal (centrowanie)
   - dodatkowo: styl banera informującego o trybie offline
   - styl "disabled" dla przycisków zablokowanych w trybie offline
*/

/* -------------------- Podstawowy layout strony -------------------- */
body {
  font-family: "Segoe UI", Arial, sans-serif;
  background: #f4f6f8;
  margin: 0;
  padding: 0;
}
#app {
  max-width: 1200px;
  margin: 18px auto;
  padding: 0 12px;
  box-sizing: border-box;
}

/* -------------------- Top bar / kontrolki -------------------- */
.top-bar {
  background: linear-gradient(180deg,#1f6feb,#1366d6);
  color: white;
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 10px;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}
.top-bar .brand { font-weight: 700; font-size: 16px; }
.top-bar .controls { margin-left: auto; display:flex; gap:8px; align-items:center; }
.top-bar .btn { background: rgba(255,255,255,0.12); color: white; border: 1px solid rgba(255,255,255,0.12); }
.top-bar .btn:hover { background: rgba(255,255,255,0.18); }

/* -------------------- Przyciski globalne -------------------- */
.btn {
  padding: 6px 10px;
  border: none;
  background: #0078d4;
  color: white;
  cursor: pointer;
  border-radius: 4px;
  font-size: 14px;
}
.btn:hover { background: #005a9e; }
.btn.outline { background: transparent; border: 1px solid rgba(0,0,0,0.08); color: #072c4b; }
.btn.small { padding: 4px 8px; font-size: 12px; }
.btn.danger { background: #b71c1c; }

/* wygląd przycisku zablokowanego (offline) */
.btn.disabled-btn, button[disabled] {
  opacity: 0.55;
  pointer-events: none;
  filter: grayscale(0.05);
}

/* -------------------- Tabela - wiersze jako "karty" -------------------- */
table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0 10px;
  margin-top: 14px;
  background: transparent;
}
thead th {
  background: #234a75;
  color: #fff;
  padding: 10px;
  font-weight: 600;
  text-align: center;
  position: sticky;
  top: 0;
  z-index: 2;
}
tbody tr {
  background: #ffffff;
  border-radius: 10px;
  overflow: hidden;
  transition: transform .12s ease, box-shadow .12s ease;
  box-shadow: 0 2px 6px rgba(0,0,0,0.04);
}
tbody tr:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 24px rgba(0,0,0,0.08);
}
tbody td {
  border: none;
  padding: 10px 12px;
  text-align: center;
  vertical-align: middle;
}

/* delikatne linie separatorów w nagłówkach/kolumnach */
th:nth-child(2), td:nth-child(2),
th:nth-child(5), td:nth-child(5),
th:nth-child(7), td:nth-child(7) {
  border-right: 1px solid #eef3f8;
}

/* Kolory i stany komórek (role) */
td.disabled { background: #333 !important; color: #fff !important; border-radius: 6px; padding: 10px; }
td.empty-cell { background: #fff7a1; border-radius: 6px; padding: 10px; color: #3a2f00; }
td.assigned-cell { background: transparent; color: inherit; padding: 10px; }

/* Select w komórce statusu - dopasowanie */
td select {
  padding: 6px 8px;
  border-radius: 6px;
  border: 1px solid #cfdff5;
  background: white;
  min-width: 160px;
}

/* numer maszyny pogrubiony */
td:first-child { font-weight: 700; }

/* -------------------- Responsywność -------------------- */
@media (max-width: 900px) {
  #app { padding: 0 8px; }
  table { display: block; overflow-x: auto; white-space: nowrap; }
}

/* -------------------- Obramowania wierszy zależne od statusu -------------------- */
/* Prawdziwa ramka wokół całego wiersza — 4px, z odstępem między wierszami */

tbody tr {
  background: #ffffff;
  border-radius: 10px;
  overflow: hidden;
  box-sizing: border-box;
}

/* Zielony — Produkcja */
tr.status-prod {
  border: 2px solid rgba(10,166,74,0.6);
}

/* Niebieski — Konserwacja */
tr.status-konserwacja {
  border: 2px solid rgba(43,123,255,0.6);
}

/* Pomarańczowy — Rozruch */
tr.status-rozruch {
  border: 2px solid rgba(255,138,0,0.6);
}

/* Czerwony — Bufor */
tr.status-bufor {
  border: 2px solid rgba(229,57,53,0.6);
}

/* Czarny — Stop */
tr.status-stop {
  border: 2px solid rgba(0,0,0,0.9);
  color: #fff;
}


/* reset tła komórek w wierszu — ale nie nadpisujemy pól .empty-cell ani .assigned-cell */
tr.status-prod td:not(.empty-cell):not(.assigned-cell),
tr.status-konserwacja td:not(.empty-cell):not(.assigned-cell),
tr.status-rozruch td:not(.empty-cell):not(.assigned-cell),
tr.status-stop td:not(.empty-cell):not(.assigned-cell),
tr.status-bufor td:not(.empty-cell):not(.assigned-cell) {
  background: transparent;
}

/* Tła dla komórek Maszyna i Status — dokładnie te komórki będą wypełnione */
td.status-prod { background: #e6f9ea !important; color: #034d18 !important; }
td.status-konserwacja { background: #e8f1ff !important; color: #08366b !important; }
td.status-rozruch { background: #fff3e6 !important; color: #7a3b00 !important; }
td.status-stop { background: #222222 !important; color: #ffffff !important; }
td.status-bufor { background: #ffe9e9 !important; color: #7a0f0f !important; }

/* -------------------- Modal (panel admina i przypisz) -------------------- */
/* centrowanie i wygląd okienka */
#assignModal, #adminPanel {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0,0,0,0.5);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
#assignModal .modal-content, #adminPanel .modal-content, #adminPanel .modal-box {
  background: #fff;
  border-radius: 12px;
  padding: 20px 24px;
  max-width: 600px;
  width: 90%;
  max-height: 85vh;
  overflow-y: auto;
  box-shadow: 0 8px 25px rgba(0,0,0,0.25);
  animation: fadeInModal 0.25s ease-out;
}
@keyframes fadeInModal { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

#assignTitle { font-size: 20px; font-weight: 700; margin-bottom: 12px; }
#assignList { display: flex; flex-direction: column; gap: 6px; margin-top: 12px; }
.employee-btn {
  background: #f4f6fc;
  border: 1px solid #d4dff0;
  border-radius: 8px;
  padding: 8px 12px;
  cursor: pointer;
  transition: 0.2s;
}
.employee-btn:hover { background: #e3eaff; }
#assignClose, #closeAdmin, #adminCloseNoLogin {
  position: absolute;
  top: 8px;
  right: 12px;
  font-size: 18px;
  color: #444;
  background: none;
  border: none;
  cursor: pointer;
}

/* Zapobiegamy przewijaniu tła gdy modal jest otwarty */
body.modal-open { overflow: hidden; }

/* -------------------- Stylizacja "maszyn spoza widoku" (jeśli używasz) ----- */
/* (Jeżeli w przyszłości przywrócisz wyróżnianie "innych", te style będą dostępne.) */
tr.machine-other { box-shadow: 0 2px 8px rgba(0,0,0,0.03); opacity: 0.98; }
tr.machine-other td { background: transparent; }
td.machine-other-num { font-style: italic; color: #555; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 8px; }
td.machine-other-num .badge {
  background: #eef2f5;
  color: #444;
  font-size: 12px;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,0.04);
  box-shadow: 0 1px 0 rgba(255,255,255,0.6) inset;
}
td.status-other { color: #777; }

/* -------------------- Baner offline i pomocnicze -------------------- */
/* Baner pojawia się gdy enforceOnlineMode wykryje brak połączenia z Supabase */
#offlineBanner {
  position: fixed;
  left: 0;
  right: 0;
  top: 0;
  padding: 10px 14px;
  background: #ffefc3;
  color: #5a3b00;
  text-align: center;
  z-index: 10000;
  font-weight: 600;
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
}

/* margin-top dla głównego kontenera jeśli chcesz zrobić miejsce pod baner
   (opcjonalne — w razie potrzeby odkomentuj)
#app { margin-top: 46px; }
*/

/* ---------- compact assign modal styles ---------- */
.modal-content { max-width: 920px; }
#assignList { padding: 6px 10px 18px 10px; }
.assign-grid {
  display: grid;
  grid-template-columns: 100px repeat(4, 1fr) 220px;
  gap: 6px;
  align-items: start;
  font-size: 13px;
}
.assign-grid .cell { padding: 4px 6px; min-height: 24px; display:flex; align-items:center; justify-content:center; }
.assign-grid .bu-cell { font-weight:700; text-align:left; padding-left:10px; }
.emp-pill {
  display:inline-block;
  padding:3px 6px;
  font-size:11px;
  border-radius:6px;
  background:#0b74d1;
  color:#fff;
  cursor:pointer;
  white-space:nowrap;
  text-overflow:ellipsis;
  overflow:hidden;
  max-width:160px;
}
.emp-pill:active { transform:translateY(1px); }
.assign-right {
  border-left:1px solid rgba(0,0,0,0.06);
  padding-left:8px;
  display:flex;
  flex-direction:column;
  gap:6px;
  max-height:320px;
  overflow:auto;
}
.assign-right .group-title { font-weight:700; font-size:12px; margin-bottom:6px; }
.small-muted { font-size:12px; color:#555; margin-bottom:6px; }
.btn.small { padding:4px 6px; font-size:12px; border-radius:6px; }

/* Assign modal - compact table & pills */
.assign-table-wrap { width: 100%; max-height: 60vh; overflow: auto; padding-right: 6px; }
.assign-table { font-size: 13px; border-collapse: collapse; width: 100%; table-layout: fixed; }
.assign-table thead th { background: #f2f6fb; padding: 8px; position: sticky; top: 0; z-index: 3; font-weight: 700; color: #1c3d5a; border-bottom: 1px solid #e6eef6; }
.th-bu { width: 120px; text-align: left; padding-left: 10px; }
.th-role { text-align: center; padding: 8px; border-left: 1px solid #eef3f8; }

.td-bu { padding: 8px 10px; vertical-align: top; font-weight: 700; border-right: 1px solid #eef3f8; width: 120px; white-space: nowrap; }
.td-role-cell { padding: 6px; vertical-align: top; border-left: 1px solid #f7fafc; }

/* kolumna z listą nazwisk (scroll wewnątrz komórki) */
.role-list { display: flex; flex-direction: column; gap: 6px; max-height: 10.5rem; overflow-y: auto; align-items: flex-start; justify-content: flex-start; padding-right: 4px; }

/* emp-pill — małe przyciski dla nazwiska */
.emp-pill { border-radius: 14px; background: #0a84ff; color: #fff; border: none; padding: 4px 8px; font-size: 12px; cursor: pointer; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; max-width: 100%; }
.emp-pill.compact { padding: 3px 6px; font-size: 11px; }

/* puste miejsce w komórce (wyrównanie) */
.role-empty { height: 1px; }

/* estetyczne przewijanie */
.role-list::-webkit-scrollbar { width: 8px; }
.role-list::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.08); border-radius: 4px; }

/* --- Duży modal z tabelą przypisania --- */
#assignModal .modal-content {
  width: 90%;
  max-width: 1300px;
  height: 85vh;
  overflow-y: auto;
}

.assign-big-table-wrap {
  width: 100%;
  max-height: 70vh;
  overflow-y: auto;
  border: 1px solid #e5e9f0;
  border-radius: 8px;
}

.assign-big-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

/* poprawiony gradient & kontrast nagłówków w modalu */
#assignModal .assign-big-table th {
  background: linear-gradient(180deg, #1f4f86, #123b6b); /* ciemniejszy gradient */
  color: #ffffff;                                       /* biały tekst dla kontrastu */
  text-align: center;
  padding: 10px 8px;
  font-weight: 700;
  border-bottom: 1px solid rgba(255,255,255,0.08);
  position: sticky;
  top: 0;
  z-index: 50;
  box-shadow: inset 0 -1px 0 rgba(255,255,255,0.03);
}

.assign-big-table td {
  padding: 6px 8px;
  border-bottom: 1px solid #f0f4f9;
  vertical-align: top;
}

.td-bu {
  font-weight: 700;
  text-align: center;
  background: #f8fafc;
  border-right: 1px solid #e5e9f0;
  width: 80px;
}

.td-names {
  max-height: 180px;
  overflow-y: auto;
  min-width: 150px;
}

.emp-name {
  display: block;
  font-size: 13px;
  color: #0055cc;
  cursor: pointer;
  padding: 2px 4px;
  border-radius: 3px;
  white-space: nowrap;
}

.emp-name:hover {
  background: #e8f0ff;
  color: #003b9a;
}

.muted {
  color: #020101;
}

/* ------------------------------
   Czytelniejsze tabele — kolumny i wiersze
--------------------------------*/

/* Ogólny wygląd wszystkich tabel */
table, .assign-big-table {
  border-collapse: collapse;
  width: 100%;
  border: 1px solid #b8c3d1; /* ramka całej tabeli */
}

/* Komórki i nagłówki — wyraźne linie */
table th,
table td,
.assign-big-table th,
.assign-big-table td {
  border: 1px solid #b8c3d1;      /* ciemniejszy szary obrys */
  padding: 6px 8px;
  text-align: center;
}

/* Wyróżnij nagłówki (jasne tło, kontrastowy tekst) */
table th,
.assign-big-table th {
  background: #f0f4f9;
  color: #0a3a6b;
  font-weight: 700;
}

/* Naprzemienne cieniowanie wierszy */
table tr:nth-child(even),
.assign-big-table tr:nth-child(even) {
  background-color: #f8fafc;
}

/* Wyróżnienie przy najechaniu */
table tr:hover,
.assign-big-table tr:hover {
  background-color: #eaf2fc;
}

/* Drobna poprawa nagłówków w modalu */
#assignModal .assign-big-table th {
  background: linear-gradient(180deg, #eaf1fb, #d6e6f6);
  color: #0a3a6b;
  border-bottom: 1px solid #b8c3d1;
}

/* ------------------------------
   Podświetlanie pojedynczej komórki + wyraźniejszy tekst
--------------------------------*/

/* Zamiast całego wiersza — efekt tylko na komórkę */
table td:hover,
.assign-big-table td:hover {
  background-color: #dce8fa;        /* jasny niebieski */
  transition: background-color 0.15s ease-in-out;
  cursor: pointer;
  font-weight: 600;
  color: #0a2965;
  text-shadow: 0 0 2px rgba(0, 0, 0, 0.18);
}

/* Nagłówki też mogą reagować na hover */
table th:hover,
.assign-big-table th:hover {
  background-color: #d7e2f4;
  transition: background-color 0.15s ease-in-out;
  color: #001e54;
  text-shadow: 0 0 2px rgba(0, 0, 0, 0.25);
}

/* Subtelny efekt aktywacji po kliknięciu (feedback wizualny) */
table td:active,
.assign-big-table td:active {
  background-color: #b8c9ef;
  transform: scale(0.98);
  transition: transform 0.05s ease;
}

/* ---- Splitowana prawa kolumna (RDNST / INNE) w tabeli przypisań ---- */
.assign-big-table td.td-split {
  padding: 8px;
  min-width: 200px;
  width: 260px;
}

.assign-big-table .td-split-top,
.assign-big-table .td-split-bottom {
  border: 1px solid #e6edf7;
  border-radius: 6px;
  padding: 6px;
  background: #fbfdff;
  max-height: 140px;
  overflow-y: auto;
}

/* Tytuły sekcji wewnątrz split */
.assign-big-table .td-split-top > div:first-child,
.assign-big-table .td-split-bottom > div:first-child {
  font-size: 12px;
  color: #123b6b;
  margin-bottom: 6px;
}

/* Małe poprawki listy nazwisk (bez tła, zwykły tekst klikany) */
.assign-big-table .emp-name {
  display: block;
  padding: 2px 4px;
  font-size: 13px;
  color: #0a3a6b;
  cursor: pointer;
  border-radius: 3px;
  white-space: nowrap;
}

.assign-big-table .emp-name:hover {
  background: #e8f0ff;
  color: #002a6a;
}

/* wyróżnienie obszaru split przy hover pojedynczej pozycji */
.assign-big-table .td-split-top .emp-name:hover,
.assign-big-table .td-split-bottom .emp-name:hover {
  background: #dbe9ff;
}

/* jeśli chcesz, żeby BU kolumna była trochę bardziej kontrastowa */
.assign-big-table td:first-child {
  background: #f7fbff;
}

/* --- Drag & drop: wizualizacja + animacja FLIP --- */
.admin-machine-row {
  transition: transform 220ms ease, box-shadow 160ms ease, background 160ms ease;
  will-change: transform;
  position: relative; /* potrzebne dla płynnej animacji */
}

.admin-machine-row.dragging {
  opacity: 0.65;
  transform: scale(0.99);
  box-shadow: 0 12px 30px rgba(59,130,246,0.14);
  z-index: 30000;
}

/* Zmodyfikowane: usuń tło, zostaw subtelny obrys */
.admin-machine-row.drag-over {
  border: 2px dashed rgba(59,130,246,0.8);
  /* tło usunięte aby nie dublować placeholdera */
  background: transparent;
  border-radius: 8px;
}


.drag-placeholder {
  border: 2px dashed rgba(96,165,250,0.9);
  background: rgba(219,234,254,0.35);
  border-radius: 8px;
  margin: 6px 0;
  transition: height 120ms ease, opacity 120ms ease;
  opacity: 0.95;
  box-sizing: border-box;
}
/* ---- Dodatkowe style dla nowej nawigacji i lepszego CTA back ---- */

/* admin-nav (pozioma nawigacja w header) */
.admin-nav { margin-left: 18px; display:flex; align-items:center; }
.admin-nav .nav-list { display:flex; gap:8px; list-style:none; margin:0; padding:0; align-items:center; }
.admin-nav .nav-item {
  padding: 8px 12px;
  border-radius: 8px;
  background: rgba(255,255,255,0.06);
  color: rgba(255,255,255,0.95);
  font-weight:600;
  cursor: pointer;
  transition: background .12s ease, transform .06s ease;
  border: 1px solid transparent;
}
.admin-nav .nav-item:hover { transform: translateY(-2px); background: rgba(255,255,255,0.12); }
.admin-nav .nav-item.active { background: #ffffff; color:#0b4f88; border-color: rgba(0,0,0,0.06); box-shadow: 0 6px 18px rgba(11,74,136,0.12); }
.admin-nav .nav-item.disabled { opacity:0.5; cursor:not-allowed; background:transparent; color:rgba(255,255,255,0.75); }

/* wyróżniony przycisk powrotu - większy, kontrastowy */
.top-bar .controls { margin-left: auto; display:flex; gap:10px; align-items:center; }
.back-cta {
  background: #fff;
  color: #1366d6;
  font-weight: 700;
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid rgba(19,102,214,0.12);
  box-shadow: 0 6px 18px rgba(19,102,214,0.12);
}
.back-cta:hover { transform: translateY(-2px); box-shadow: 0 10px 28px rgba(19,102,214,0.18); }

/* responsywność: skondensuj nav na niewielkich ekranach */
@media (max-width: 860px) {
  .admin-nav { display:none; } /* na małych ekranach chowanie – możesz dodać hamburger później */
  .top-bar .brand { font-size: 15px; }
  .back-cta { padding: 6px 8px; font-size:14px; }
}

/* drobne poprawki: sekcja panelu */
.panel h3 { font-size: 18px; margin-bottom:10px; }
.card { background: #fff; border-radius: 10px; padding: 12px; box-shadow: 0 6px 18px rgba(2,6,23,0.04); }

/* Styl listy pracowników — poprawiony wygląd */
.admin-emp-header {
  background-color: #f5f6f8;
  border-radius: 6px 6px 0 0;
}

.admin-emp-row:hover {
  background-color: #f9fafb;
}

.btn.btn-small {
  font-size: 13px;
  padding: 4px 8px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  transition: 0.15s ease;
}

.btn.btn-gray {
  background: #e0e0e0;
}

.btn.btn-blue {
  background: #007bff;
  color: #fff;
}

.btn.btn-gray:hover {
  background: #d5d5d5;
}

.btn.btn-blue:hover {
  background: #0069d9;
}


/* koniec pliku */
